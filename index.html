<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø°ÙƒÙŠ - Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</title>
    <style>
        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
        :root {
            --primary: #7C3AED;
            --primary-light: #A78BFA;
            --primary-dark: #5B21B6;
            --secondary: #06B6D4;
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
            --light: #F9FAFB;
            --dark: #1F2937;
            --gray: #6B7280;
            --border: #E5E7EB;
            
            /* Ø§Ù„ØªØ¯Ø±Ø¬Ø§Øª */
            --gradient-primary: linear-gradient(135deg, #7C3AED 0%, #A78BFA 100%);
            --gradient-success: linear-gradient(135deg, #10B981 0%, #34D399 100%);
            --gradient-danger: linear-gradient(135deg, #EF4444 0%, #F87171 100%);
            --gradient-warning: linear-gradient(135deg, #F59E0B 0%, #FBBF24 100%);
            --gradient-dark: linear-gradient(135deg, #1F2937 0%, #374151 100%);
            
            /* Ø§Ù„Ø¸Ù„Ø§Ù„ */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
            
            /* Ø§Ù„Ø²ÙˆØ§ÙŠØ§ */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --radius-full: 999px;
        }
        
        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        body.dark-mode {
            --light: #1F2937;
            --dark: #F9FAFB;
            --border: #374151;
            --gray: #9CA3AF;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.4);
        }
        
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 15px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: var(--shadow-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }
        
        .header h1 {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(15deg);
        }
        
        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content {
            padding: 80px 15px 90px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-mode .bottom-nav {
            background: var(--light);
            border-top-color: var(--border);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            padding: 8px 12px;
            border-radius: var(--radius-md);
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .nav-item span {
            font-size: 12px;
            font-weight: 600;
        }
        
        .nav-item.active {
            color: var(--primary);
            background: rgba(124, 58, 237, 0.1);
        }
        
        .nav-indicator {
            position: absolute;
            top: -5px;
            width: 6px;
            height: 6px;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .nav-item.active .nav-indicator {
            opacity: 1;
        }
        
        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .welcome-card {
            background: var(--gradient-dark);
            color: white;
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .welcome-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }
        
        .welcome-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .welcome-subtitle {
            opacity: 0.9;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .total-balance {
            font-size: 2.5rem;
            font-weight: 800;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø³Ø±ÙŠØ¹Ø© */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .quick-btn {
            background: white;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        body.dark-mode .quick-btn {
            background: var(--light);
            border-color: var(--border);
        }
        
        .quick-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary-light);
        }
        
        .quick-btn i {
            font-size: 24px;
            color: var(--primary);
            margin-bottom: 10px;
            display: block;
        }
        
        .quick-btn .title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .quick-btn .subtitle {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø´Ø®Ø§Øµ */
        .people-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .person-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 20px;
            transition: all 0.3s;
        }
        
        body.dark-mode .person-card {
            background: var(--light);
        }
        
        .person-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }
        
        .person-avatar {
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            color: white;
            font-weight: 700;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .person-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .person-balance {
            font-size: 1.3rem;
            font-weight: 800;
            font-family: 'Courier New', monospace;
        }
        
        .balance-positive {
            color: var(--success);
        }
        
        .balance-negative {
            color: var(--danger);
        }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª */
        .transactions-list {
            margin-top: 20px;
        }
        
        .transaction-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s;
        }
        
        body.dark-mode .transaction-item {
            background: var(--light);
        }
        
        .transaction-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-sm);
        }
        
        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .transaction-details {
            flex: 1;
        }
        
        .transaction-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .transaction-info {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .transaction-amount {
            font-weight: 700;
            font-size: 1.1rem;
            font-family: 'Courier New', monospace;
        }
        
        /* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            animation: modalSlide 0.3s ease;
        }
        
        body.dark-mode .modal-content {
            background: var(--light);
        }
        
        @keyframes modalSlide {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            font-size: 1.3rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 20px;
            max-height: calc(90vh - 80px);
            overflow-y: auto;
        }
        
        /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        body.dark-mode .form-label {
            color: var(--light);
        }
        
        .form-control, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
            color: var(--dark);
        }
        
        body.dark-mode .form-control,
        body.dark-mode .form-select {
            background: var(--light);
            color: var(--dark);
            border-color: var(--border);
        }
        
        .form-control:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        .btn {
            flex: 1;
            padding: 15px;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.3);
        }
        
        .btn-secondary {
            background: var(--border);
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background: var(--gray);
            color: white;
        }
        
        /* Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        .empty-state h4 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        body.dark-mode .empty-state h4 {
            color: var(--light);
        }
        
        /* Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© */
        .search-bar {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 45px 15px 15px;
            border: 2px solid var(--border);
            border-radius: var(--radius-full);
            font-size: 1rem;
            background: white;
            color: var(--dark);
        }
        
        body.dark-mode .search-input {
            background: var(--light);
            color: var(--dark);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØ¦Ø§Øª */
        .category-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            padding: 10px 15px;
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        body.dark-mode .category-btn {
            background: var(--light);
        }
        
        .category-btn:hover {
            transform: translateY(-2px);
        }
        
        .category-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
        @media (max-width: 768px) {
            .main-content {
                padding: 70px 12px 90px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .people-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal-content {
                width: 95%;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                padding: 12px 15px;
            }
            
            .people-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-item span {
                font-size: 11px;
            }
        }
        
        /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: var(--radius-md);
            padding: 15px 20px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 3000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            max-width: 350px;
        }
        
        body.dark-mode .notification {
            background: var(--light);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        
        .notification-success .notification-icon {
            background: var(--success);
        }
        
        .notification-error .notification-icon {
            background: var(--danger);
        }
        
        .notification-info .notification-icon {
            background: var(--info);
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .notification-message {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Øª */
        .currency-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .currency-btn {
            flex: 1;
            padding: 12px;
            background: white;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        body.dark-mode .currency-btn {
            background: var(--light);
        }
        
        .currency-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: var(--primary);
        }
        
        .currency-btn:hover:not(.active) {
            border-color: var(--primary);
        }
        
        /* Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù… */
        .fab {
            position: fixed;
            bottom: 80px;
            left: 20px;
            width: 56px;
            height: 56px;
            background: var(--gradient-primary);
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 999;
            transition: all 0.3s;
            border: none;
        }
        
        .fab:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.4);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-check"></i>
        </div>
        <div class="notification-content">
            <div class="notification-title" id="notificationTitle">Ù†Ø¬Ø§Ø­</div>
            <div class="notification-message" id="notificationMessage">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­</div>
        </div>
    </div>
    
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header class="header">
        <h1>
            <i class="fas fa-crown"></i>
            Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø°ÙƒÙŠ
        </h1>
        <div class="header-controls">
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>
    
    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main class="main-content">
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª -->
        <section class="section active" id="accounts-section">
            <div class="welcome-card">
                <div class="welcome-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹</div>
                <div class="welcome-subtitle">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±ØµØ¯Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</div>
                <div class="total-balance" id="totalBalance">0 Ø¯ÙŠÙ†Ø§Ø±</div>
            </div>
            
            <div class="quick-actions">
                <div class="quick-btn" id="addPersonBtn">
                    <i class="fas fa-user-plus"></i>
                    <div class="title">Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ</div>
                    <div class="subtitle">Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</div>
                </div>
                <div class="quick-btn" id="addTransactionBtn">
                    <i class="fas fa-exchange-alt"></i>
                    <div class="title">Ø¹Ù…Ù„ÙŠØ© Ù…Ø§Ù„ÙŠØ©</div>
                    <div class="subtitle">Ø¥ÙŠØ¯Ø§Ø¹ Ø£Ùˆ Ø³Ø­Ø¨</div>
                </div>
                <div class="quick-btn" id="transferBtn">
                    <i class="fas fa-money-bill-transfer"></i>
                    <div class="title">ØªØ­ÙˆÙŠÙ„</div>
                    <div class="subtitle">Ø¨ÙŠÙ† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</div>
                </div>
                <div class="quick-btn" id="reportBtn">
                    <i class="fas fa-chart-bar"></i>
                    <div class="title">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
                    <div class="subtitle">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                </div>
            </div>
            
            <h2 style="margin-bottom: 20px; font-size: 1.3rem; font-weight: 700;">
                <i class="fas fa-users"></i> Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
                <span style="font-size: 0.9rem; color: var(--gray); margin-right: 10px;" id="peopleCount">(0)</span>
            </h2>
            
            <div id="peopleList">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª -->
        <section class="section" id="transactions-section">
            <h2 style="margin-bottom: 20px; font-size: 1.3rem; font-weight: 700;">
                <i class="fas fa-exchange-alt"></i> Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø§Ù„ÙŠ
                <span style="font-size: 0.9rem; color: var(--gray); margin-right: 10px;" id="transactionsCount">(0)</span>
            </h2>
            
            <div class="search-bar">
                <input type="text" class="search-input" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª...">
                <div class="search-icon">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            
            <div class="category-buttons">
                <button class="category-btn active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
                <button class="category-btn" data-filter="income">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</button>
                <button class="category-btn" data-filter="expense">Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</button>
                <button class="category-btn" data-filter="transfer">Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</button>
            </div>
            
            <div id="transactionsList">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
        <section class="section" id="reports-section">
            <h2 style="margin-bottom: 20px; font-size: 1.3rem; font-weight: 700;">
                <i class="fas fa-chart-bar"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            </h2>
            
            <div class="currency-selector" id="reportCurrencySelector">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
            
            <div id="reportContent">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <section class="section" id="settings-section">
            <h2 style="margin-bottom: 20px; font-size: 1.3rem; font-weight: 700;">
                <i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </h2>
            
            <div class="quick-btn" id="exportDataBtn" style="margin-bottom: 15px;">
                <i class="fas fa-download"></i>
                <div class="title">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                <div class="subtitle">Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</div>
            </div>
            
            <div class="quick-btn" id="importDataBtn" style="margin-bottom: 15px;">
                <i class="fas fa-upload"></i>
                <div class="title">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                <div class="subtitle">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù†Ø³Ø®Ø©</div>
            </div>
            
            <div class="quick-btn" id="resetDataBtn" style="margin-bottom: 25px;">
                <i class="fas fa-redo"></i>
                <div class="title">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</div>
                <div class="subtitle">Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
            </div>
            
            <div style="background: white; border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--border);">
                <h3 style="margin-bottom: 15px; font-size: 1.1rem; font-weight: 600;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div style="font-weight: 600;">Ø§Ù„Ø¥ØµØ¯Ø§Ø±</div>
                    <div>v2.0</div>
                    <div style="font-weight: 600;">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ</div>
                    <div id="settingsPeopleCount">0</div>
                    <div style="font-weight: 600;">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
                    <div id="settingsTransactionsCount">0</div>
                    <div style="font-weight: 600;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±ØµØ¯Ø©</div>
                    <div id="settingsTotalBalance">0</div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù… -->
    <button class="fab" id="fabButton">
        <i class="fas fa-plus"></i>
    </button>
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-section="accounts">
            <div class="nav-indicator"></div>
            <i class="fas fa-home"></i>
            <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </a>
        <a href="#" class="nav-item" data-section="transactions">
            <div class="nav-indicator"></div>
            <i class="fas fa-exchange-alt"></i>
            <span>Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</span>
        </a>
        <a href="#" class="nav-item" data-section="reports">
            <div class="nav-indicator"></div>
            <i class="fas fa-chart-bar"></i>
            <span>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span>
        </a>
        <a href="#" class="nav-item" data-section="settings">
            <div class="nav-indicator"></div>
            <i class="fas fa-cog"></i>
            <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </a>
    </nav>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ -->
    <div class="modal" id="addPersonModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ Ø¬Ø¯ÙŠØ¯</h3>
                <button class="modal-close" id="closeAddPersonModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ</label>
                    <input type="text" class="form-control" id="personName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>
                <div class="form-group">
                    <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="tel" class="form-control" id="personPhone" placeholder="05xxxxxxxx">
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</label>
                    <select class="form-select" id="personCurrency">
                        <option value="LYD">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ (LYD)</option>
                        <option value="EUR">ÙŠÙˆØ±Ùˆ (EUR)</option>
                        <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <textarea class="form-control" id="personNotes" rows="3" placeholder="Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" id="cancelAddPerson">
                        <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                    </button>
                    <button class="btn btn-primary" id="savePerson">
                        <i class="fas fa-save"></i> Ø­ÙØ¸
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© -->
    <div class="modal" id="addTransactionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exchange-alt"></i> Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <button class="modal-close" id="closeAddTransactionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>
                    <select class="form-select" id="transactionType">
                        <option value="income">Ø¥ÙŠØ¯Ø§Ø¹ (Ø£Ø®Ø°Øª Ù…Ù†Ù‡)</option>
                        <option value="expense">Ø³Ø­Ø¨ (Ø¯ÙØ¹Øª Ù„Ù‡)</option>
                        <option value="transfer">ØªØ­ÙˆÙŠÙ„ Ø¯Ø§Ø®Ù„ÙŠ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø´Ø®Øµ</label>
                    <select class="form-select" id="transactionPerson">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                    </select>
                </div>
                <div class="form-group" id="transferToGroup" style="display: none;">
                    <label class="form-label">Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø®Øµ</label>
                    <select class="form-select" id="transferToPerson">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº</label>
                    <input type="number" class="form-control" id="transactionAmount" placeholder="0.000" step="0.001" min="0">
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                    <select class="form-select" id="transactionCurrency">
                        <option value="LYD">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ (LYD)</option>
                        <option value="EUR">ÙŠÙˆØ±Ùˆ (EUR)</option>
                        <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <textarea class="form-control" id="transactionDescription" rows="3" placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©..."></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" id="cancelAddTransaction">
                        <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                    </button>
                    <button class="btn btn-primary" id="saveTransaction">
                        <i class="fas fa-save"></i> Ø­ÙØ¸
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ====================
        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠ
        // ====================
        
        // Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† ÙÙŠ localStorage
        const STORAGE_KEY = 'smartMoneyManager_data';
        
        // Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let appData = {
            people: [],
            transactions: [],
            settings: {
                darkMode: false,
                defaultCurrency: 'LYD'
            },
            version: '2.0',
            lastUpdate: new Date().toISOString()
        };
        
        // ====================
        // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ†
        // ====================
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function loadData() {
            try {
                const savedData = localStorage.getItem(STORAGE_KEY);
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ù†ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    if (parsedData.people && parsedData.transactions) {
                        appData = parsedData;
                        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                    } else {
                        console.log('âš ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©');
                        initSampleData();
                    }
                } else {
                    console.log('ğŸ“ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø©ØŒ Ø³ÙŠØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
                    initSampleData();
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                initSampleData();
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            applySettings();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            updateUI();
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveData() {
            try {
                appData.lastUpdate = new Date().toISOString();
                localStorage.setItem(STORAGE_KEY, JSON.stringify(appData));
                console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                return true;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
                return false;
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function initSampleData() {
            appData = {
                people: [
                    {
                        id: '1',
                        name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                        phone: '0512345678',
                        currency: 'LYD',
                        notes: 'Ø´Ø±ÙŠÙƒ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„',
                        createdAt: '2024-01-01',
                        balance: 500
                    },
                    {
                        id: '2',
                        name: 'Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ',
                        phone: '0523456789',
                        currency: 'EUR',
                        notes: 'ØµØ¯ÙŠÙ‚Ø©',
                        createdAt: '2024-01-05',
                        balance: -200
                    },
                    {
                        id: '3',
                        name: 'Ø®Ø§Ù„Ø¯ Ø­Ø³Ù†',
                        phone: '0534567890',
                        currency: 'USD',
                        notes: 'Ø¬Ø§Ø±',
                        createdAt: '2024-01-10',
                        balance: 1000
                    }
                ],
                transactions: [
                    {
                        id: '1',
                        type: 'income',
                        personId: '1',
                        amount: 500,
                        currency: 'LYD',
                        description: 'Ø¯ÙØ¹Ø© Ø´Ù‡Ø± ÙŠÙ†Ø§ÙŠØ±',
                        date: '2024-01-15',
                        createdAt: '2024-01-15T10:00:00'
                    },
                    {
                        id: '2',
                        type: 'expense',
                        personId: '2',
                        amount: 200,
                        currency: 'EUR',
                        description: 'Ø³Ù„ÙØ© Ø·Ø§Ø±Ø¦Ø©',
                        date: '2024-01-20',
                        createdAt: '2024-01-20T14:30:00'
                    },
                    {
                        id: '3',
                        type: 'transfer',
                        fromPersonId: '1',
                        toPersonId: '3',
                        amount: 100,
                        currency: 'USD',
                        description: 'ØªØ­ÙˆÙŠÙ„ Ø³Ø¯Ø§Ø¯ Ø¯ÙŠÙ†',
                        date: '2024-01-25',
                        createdAt: '2024-01-25T09:15:00'
                    }
                ],
                settings: {
                    darkMode: false,
                    defaultCurrency: 'LYD'
                },
                version: '2.0',
                lastUpdate: new Date().toISOString()
            };
            
            saveData();
        }
        
        // ====================
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        // ====================
        
        function applySettings() {
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
            if (appData.settings.darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.body.classList.remove('dark-mode');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
            }
        }
        
        // ====================
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        // ====================
        
        function updateUI() {
            updatePeopleList();
            updateTransactionsList();
            updateTotalBalance();
            updateSettingsInfo();
            updateReportContent();
            updatePersonSelects();
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±ØµØ¯Ø©
        function updateTotalBalance() {
            let total = 0;
            appData.people.forEach(person => {
                total += calculatePersonBalance(person.id);
            });
            
            const totalBalanceElement = document.getElementById('totalBalance');
            if (totalBalanceElement) {
                totalBalanceElement.textContent = formatCurrency(total, 'LYD');
            }
        }
        
        // Ø­Ø³Ø§Ø¨ Ø±ØµÙŠØ¯ Ø´Ø®Øµ
        function calculatePersonBalance(personId) {
            let balance = 0;
            
            appData.transactions.forEach(transaction => {
                if (transaction.type === 'income' && transaction.personId === personId) {
                    balance += transaction.amount;
                } else if (transaction.type === 'expense' && transaction.personId === personId) {
                    balance -= transaction.amount;
                } else if (transaction.type === 'transfer') {
                    if (transaction.fromPersonId === personId) {
                        balance -= transaction.amount;
                    }
                    if (transaction.toPersonId === personId) {
                        balance += transaction.amount;
                    }
                }
            });
            
            return balance;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø´Ø®Ø§Øµ
        function updatePeopleList() {
            const peopleListElement = document.getElementById('peopleList');
            const peopleCountElement = document.getElementById('peopleCount');
            
            if (!peopleListElement) return;
            
            if (appData.people.length === 0) {
                peopleListElement.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª</h4>
                        <p>Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£Ø´Ø®Ø§Øµ Ù„Ø¨Ø¯Ø¡ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</p>
                    </div>
                `;
                if (peopleCountElement) peopleCountElement.textContent = '(0)';
                return;
            }
            
            if (peopleCountElement) peopleCountElement.textContent = `(${appData.people.length})`;
            
            let html = '<div class="people-grid">';
            
            appData.people.forEach(person => {
                const balance = calculatePersonBalance(person.id);
                const balanceClass = balance >= 0 ? 'balance-positive' : 'balance-negative';
                const balanceIcon = balance >= 0 ? 'fas fa-arrow-up' : 'fas fa-arrow-down';
                
                html += `
                    <div class="person-card" data-id="${person.id}">
                        <div class="person-avatar">
                            ${person.name.charAt(0)}
                        </div>
                        <div class="person-name">${person.name}</div>
                        <div class="person-balance ${balanceClass}">
                            <i class="${balanceIcon}"></i>
                            ${formatCurrency(Math.abs(balance), person.currency)}
                        </div>
                        <div style="margin-top: 10px; font-size: 0.8rem; color: var(--gray);">
                            <i class="fas fa-phone"></i> ${person.phone || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            peopleListElement.innerHTML = html;
            
            // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
            document.querySelectorAll('.person-card').forEach(card => {
                card.addEventListener('click', function() {
                    const personId = this.getAttribute('data-id');
                    showPersonDetails(personId);
                });
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        function updateTransactionsList() {
            const transactionsListElement = document.getElementById('transactionsList');
            const transactionsCountElement = document.getElementById('transactionsCount');
            
            if (!transactionsListElement) return;
            
            if (appData.transactions.length === 0) {
                transactionsListElement.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exchange-alt"></i>
                        <h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª</h4>
                        <p>Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø§Ù„ÙŠØ© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¬Ù„</p>
                    </div>
                `;
                if (transactionsCountElement) transactionsCountElement.textContent = '(0)';
                return;
            }
            
            if (transactionsCountElement) transactionsCountElement.textContent = `(${appData.transactions.length})`;
            
            let html = '<div class="transactions-list">';
            
            // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 20 Ø¹Ù…Ù„ÙŠØ©
            const recentTransactions = [...appData.transactions]
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 20);
            
            recentTransactions.forEach(transaction => {
                let personName = '';
                let icon = 'fas fa-exchange-alt';
                let color = 'var(--primary)';
                let amountPrefix = '';
                
                if (transaction.type === 'income') {
                    personName = getPersonName(transaction.personId);
                    icon = 'fas fa-arrow-down';
                    color = 'var(--success)';
                    amountPrefix = '+';
                } else if (transaction.type === 'expense') {
                    personName = getPersonName(transaction.personId);
                    icon = 'fas fa-arrow-up';
                    color = 'var(--danger)';
                    amountPrefix = '-';
                } else if (transaction.type === 'transfer') {
                    personName = `${getPersonName(transaction.fromPersonId)} â†’ ${getPersonName(transaction.toPersonId)}`;
                    icon = 'fas fa-money-bill-transfer';
                    color = 'var(--info)';
                    amountPrefix = 'â†”';
                }
                
                html += `
                    <div class="transaction-item">
                        <div class="transaction-icon" style="background: ${color}">
                            <i class="${icon}"></i>
                        </div>
                        <div class="transaction-details">
                            <div class="transaction-title">${personName}</div>
                            <div class="transaction-info">
                                ${transaction.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'} â€¢ ${formatDate(transaction.date)}
                            </div>
                        </div>
                        <div class="transaction-amount" style="color: ${color}">
                            ${amountPrefix}${formatCurrency(transaction.amount, transaction.currency)}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            transactionsListElement.innerHTML = html;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function updateSettingsInfo() {
            const settingsPeopleCount = document.getElementById('settingsPeopleCount');
            const settingsTransactionsCount = document.getElementById('settingsTransactionsCount');
            const settingsTotalBalance = document.getElementById('settingsTotalBalance');
            
            if (settingsPeopleCount) settingsPeopleCount.textContent = appData.people.length;
            if (settingsTransactionsCount) settingsTransactionsCount.textContent = appData.transactions.length;
            
            if (settingsTotalBalance) {
                let total = 0;
                appData.people.forEach(person => {
                    total += calculatePersonBalance(person.id);
                });
                settingsTotalBalance.textContent = formatCurrency(total, 'LYD');
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
        function updateReportContent() {
            const reportContent = document.getElementById('reportContent');
            if (!reportContent) return;
            
            let html = `
                <div style="background: white; border-radius: var(--radius-lg); padding: 20px; margin-bottom: 20px; border: 1px solid var(--border);">
                    <h3 style="margin-bottom: 15px; font-size: 1.1rem; font-weight: 600;">Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
            `;
            
            // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Øª
            const currencyStats = {
                LYD: { income: 0, expense: 0, count: 0 },
                EUR: { income: 0, expense: 0, count: 0 },
                USD: { income: 0, expense: 0, count: 0 }
            };
            
            appData.transactions.forEach(transaction => {
                if (currencyStats[transaction.currency]) {
                    if (transaction.type === 'income') {
                        currencyStats[transaction.currency].income += transaction.amount;
                    } else if (transaction.type === 'expense') {
                        currencyStats[transaction.currency].expense += transaction.amount;
                    }
                    currencyStats[transaction.currency].count++;
                }
            });
            
            Object.entries(currencyStats).forEach(([currency, stats]) => {
                if (stats.count > 0) {
                    const net = stats.income - stats.expense;
                    html += `
                        <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span style="font-weight: 600;">${getCurrencyName(currency)}</span>
                                <span style="font-weight: 700; color: ${net >= 0 ? 'var(--success)' : 'var(--danger)'}">
                                    ${formatCurrency(net, currency)}
                                </span>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9rem;">
                                <div>
                                    <div style="color: var(--success);">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</div>
                                    <div>${formatCurrency(stats.income, currency)}</div>
                                </div>
                                <div>
                                    <div style="color: var(--danger);">Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</div>
                                    <div>${formatCurrency(stats.expense, currency)}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            
            html += '</div>';
            
            // Ø£Ø¹Ù„Ù‰ 5 Ø£Ø´Ø®Ø§Øµ
            const peopleBalances = appData.people.map(person => ({
                ...person,
                balance: calculatePersonBalance(person.id)
            })).sort((a, b) => Math.abs(b.balance) - Math.abs(a.balance)).slice(0, 5);
            
            if (peopleBalances.length > 0) {
                html += `
                    <div style="background: white; border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--border);">
                        <h3 style="margin-bottom: 15px; font-size: 1.1rem; font-weight: 600;">Ø£Ø¹Ù„Ù‰ 5 Ø£Ø±ØµØ¯Ø©</h3>
                `;
                
                peopleBalances.forEach(person => {
                    const balanceClass = person.balance >= 0 ? 'balance-positive' : 'balance-negative';
                    html += `
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--border);">
                            <span>${person.name}</span>
                            <span class="${balanceClass}" style="font-weight: 700;">
                                ${formatCurrency(Math.abs(person.balance), person.currency)}
                            </span>
                        </div>
                    `;
                });
                
                html += '</div>';
            }
            
            reportContent.innerHTML = html;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù‚ÙˆØ§Ø¦Ù… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø´Ø®Ø§Øµ
        function updatePersonSelects() {
            const selects = ['transactionPerson', 'transferToPerson'];
            
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø®Øµ</option>';
                    appData.people.forEach(person => {
                        const option = document.createElement('option');
                        option.value = person.id;
                        option.textContent = person.name;
                        select.appendChild(option);
                    });
                }
            });
        }
        
        // ====================
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        // ====================
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ
        function getPersonName(personId) {
            const person = appData.people.find(p => p.id === personId);
            return person ? person.name : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        }
        
        // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„Ø©
        function formatCurrency(amount, currency) {
            const formatted = new Intl.NumberFormat('ar-LY', {
                minimumFractionDigits: 3,
                maximumFractionDigits: 3
            }).format(amount);
            
            return `${formatted} ${getCurrencySymbol(currency)}`;
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø¹Ù…Ù„Ø©
        function getCurrencySymbol(currency) {
            switch(currency) {
                case 'LYD': return 'Ø¯ÙŠÙ†Ø§Ø±';
                case 'EUR': return 'ÙŠÙˆØ±Ùˆ';
                case 'USD': return 'Ø¯ÙˆÙ„Ø§Ø±';
                default: return currency;
            }
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„Ø©
        function getCurrencyName(currency) {
            switch(currency) {
                case 'LYD': return 'Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ';
                case 'EUR': return 'ÙŠÙˆØ±Ùˆ';
                case 'USD': return 'Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ';
                default: return currency;
            }
        }
        
        // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ar-LY');
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const title = document.getElementById('notificationTitle');
            const msg = document.getElementById('notificationMessage');
            
            if (!notification || !title || !msg) return;
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Øµ
            title.textContent = type === 'success' ? 'Ù†Ø¬Ø§Ø­' : 
                               type === 'error' ? 'Ø®Ø·Ø£' : 'Ù…Ø¹Ù„ÙˆÙ…Ø©';
            msg.textContent = message;
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†ÙˆØ¹
            notification.className = `notification notification-${type}`;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
            notification.classList.add('show');
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø®Øµ
        function showPersonDetails(personId) {
            const person = appData.people.find(p => p.id === personId);
            if (!person) return;
            
            const balance = calculatePersonBalance(personId);
            const personTransactions = appData.transactions.filter(t => 
                t.personId === personId || t.fromPersonId === personId || t.toPersonId === personId
            );
            
            let details = `
                <div style="background: white; border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--border);">
                    <h3 style="margin-bottom: 15px; font-size: 1.2rem; font-weight: 700; color: var(--primary);">
                        <i class="fas fa-user"></i> ${person.name}
                    </h3>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <div style="font-weight: 600;">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</div>
                            <div>${person.phone || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}</div>
                            <div style="font-weight: 600;">Ø§Ù„Ø¹Ù…Ù„Ø©</div>
                            <div>${getCurrencyName(person.currency)}</div>
                            <div style="font-weight: 600;">Ø§Ù„Ø±ØµÙŠØ¯</div>
                            <div style="font-weight: 700; color: ${balance >= 0 ? 'var(--success)' : 'var(--danger)'}">
                                ${formatCurrency(Math.abs(balance), person.currency)}
                            </div>
                        </div>
                    </div>
            `;
            
            if (person.notes) {
                details += `
                    <div style="margin-bottom: 15px; padding: 10px; background: var(--light); border-radius: var(--radius-md);">
                        <div style="font-weight: 600; margin-bottom: 5px;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</div>
                        <div>${person.notes}</div>
                    </div>
                `;
            }
            
            if (personTransactions.length > 0) {
                details += `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: 600; margin-bottom: 10px;">Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (${personTransactions.length})</div>
                `;
                
                const recentTransactions = personTransactions.slice(-5).reverse();
                
                recentTransactions.forEach(transaction => {
                    let typeText = '';
                    let amountColor = '';
                    
                    if (transaction.type === 'income') {
                        typeText = 'Ø¥ÙŠØ¯Ø§Ø¹';
                        amountColor = 'var(--success)';
                    } else if (transaction.type === 'expense') {
                        typeText = 'Ø³Ø­Ø¨';
                        amountColor = 'var(--danger)';
                    } else if (transaction.type === 'transfer') {
                        if (transaction.fromPersonId === personId) {
                            typeText = 'ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ' + getPersonName(transaction.toPersonId);
                            amountColor = 'var(--info)';
                        } else {
                            typeText = 'ØªØ­ÙˆÙŠÙ„ Ù…Ù† ' + getPersonName(transaction.fromPersonId);
                            amountColor = 'var(--success)';
                        }
                    }
                    
                    details += `
                        <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border);">
                            <div>
                                <div style="font-weight: 600;">${typeText}</div>
                                <div style="font-size: 0.9rem; color: var(--gray);">
                                    ${transaction.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'} â€¢ ${formatDate(transaction.date)}
                                </div>
                            </div>
                            <div style="font-weight: 700; color: ${amountColor}">
                                ${formatCurrency(transaction.amount, transaction.currency)}
                            </div>
                        </div>
                    `;
                });
                
                details += '</div>';
            }
            
            details += '</div>';
            
            // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-info-circle"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø®Øµ</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        ${details}
                        <div class="form-actions" style="margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">
                                <i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.remove();
                }
            });
        }
        
        // ====================
        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        // ====================
        
        function initializeEvents() {
            // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
            document.getElementById('themeToggle').addEventListener('click', function() {
                appData.settings.darkMode = !appData.settings.darkMode;
                applySettings();
                saveData();
                showNotification(appData.settings.darkMode ? 'ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ' : 'ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ', 'success');
            });
            
            // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const section = this.getAttribute('data-section');
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ†Ø´ÙŠØ·
                    document.querySelectorAll('.nav-item').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                    document.querySelectorAll('.section').forEach(sec => {
                        sec.classList.remove('active');
                    });
                    document.getElementById(`${section}-section`).classList.add('active');
                    
                    // ØªØ­Ø¯ÙŠØ« Ø²Ø± FAB
                    updateFabAction(section);
                });
            });
            
            // Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù…
            document.getElementById('fabButton').addEventListener('click', function() {
                const activeSection = document.querySelector('.section.active').id.replace('-section', '');
                
                switch(activeSection) {
                    case 'accounts':
                        openModal('addPersonModal');
                        break;
                    case 'transactions':
                        openModal('addTransactionModal');
                        break;
                    case 'reports':
                        generateReport();
                        break;
                    case 'settings':
                        showSettingsActions();
                        break;
                }
            });
            
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
            document.getElementById('addPersonBtn').addEventListener('click', () => openModal('addPersonModal'));
            document.getElementById('addTransactionBtn').addEventListener('click', () => openModal('addTransactionModal'));
            document.getElementById('transferBtn').addEventListener('click', () => {
                document.getElementById('transactionType').value = 'transfer';
                openModal('addTransactionModal');
            });
            document.getElementById('reportBtn').addEventListener('click', () => {
                document.querySelector('[data-section="reports"]').click();
            });
            
            // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('exportDataBtn').addEventListener('click', exportData);
            
            // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('importDataBtn').addEventListener('click', importData);
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('resetDataBtn').addEventListener('click', resetData);
            
            // Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ
            document.getElementById('savePerson').addEventListener('click', addNewPerson);
            document.getElementById('cancelAddPerson').addEventListener('click', () => closeModal('addPersonModal'));
            document.getElementById('closeAddPersonModal').addEventListener('click', () => closeModal('addPersonModal'));
            
            // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ©
            document.getElementById('saveTransaction').addEventListener('click', addNewTransaction);
            document.getElementById('cancelAddTransaction').addEventListener('click', () => closeModal('addTransactionModal'));
            document.getElementById('closeAddTransactionModal').addEventListener('click', () => closeModal('addTransactionModal'));
            
            // ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
            document.getElementById('transactionType').addEventListener('change', function() {
                const transferGroup = document.getElementById('transferToGroup');
                if (this.value === 'transfer') {
                    transferGroup.style.display = 'block';
                } else {
                    transferGroup.style.display = 'none';
                }
            });
            
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
            document.getElementById('searchInput').addEventListener('input', searchTransactions);
            
            // ØªØµÙÙŠØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const filter = this.getAttribute('data-filter');
                    filterTransactions(filter);
                });
            });
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ø±Ø§Ø¡ Ø²Ø± FAB
        function updateFabAction(section) {
            const fab = document.getElementById('fabButton');
            if (!fab) return;
            
            switch(section) {
                case 'accounts':
                    fab.innerHTML = '<i class="fas fa-user-plus"></i>';
                    break;
                case 'transactions':
                    fab.innerHTML = '<i class="fas fa-exchange-alt"></i>';
                    break;
                case 'reports':
                    fab.innerHTML = '<i class="fas fa-chart-bar"></i>';
                    break;
                case 'settings':
                    fab.innerHTML = '<i class="fas fa-cog"></i>';
                    break;
            }
        }
        
        // ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                
                // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø£ÙˆÙ„ Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„
                const firstInput = modal.querySelector('input, select, textarea');
                if (firstInput) {
                    setTimeout(() => firstInput.focus(), 100);
                }
            }
        }
        
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                
                // Ù…Ø³Ø­ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                modal.querySelectorAll('input, textarea').forEach(field => {
                    field.value = '';
                });
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                if (modalId === 'addTransactionModal') {
                    document.getElementById('transactionType').value = 'income';
                    document.getElementById('transferToGroup').style.display = 'none';
                }
            }
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ Ø¬Ø¯ÙŠØ¯
        function addNewPerson() {
            const name = document.getElementById('personName').value.trim();
            const phone = document.getElementById('personPhone').value.trim();
            const currency = document.getElementById('personCurrency').value;
            const notes = document.getElementById('personNotes').value.trim();
            
            if (!name) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ', 'error');
                document.getElementById('personName').focus();
                return;
            }
            
            const newPerson = {
                id: Date.now().toString(),
                name: name,
                phone: phone,
                currency: currency,
                notes: notes,
                createdAt: new Date().toISOString().split('T')[0]
            };
            
            appData.people.push(newPerson);
            
            if (saveData()) {
                updateUI();
                closeModal('addPersonModal');
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø®Øµ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
        function addNewTransaction() {
            const type = document.getElementById('transactionType').value;
            const personId = document.getElementById('transactionPerson').value;
            const transferToId = document.getElementById('transferToPerson').value;
            const amount = parseFloat(document.getElementById('transactionAmount').value);
            const currency = document.getElementById('transactionCurrency').value;
            const description = document.getElementById('transactionDescription').value.trim();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (!amount || amount <= 0) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­', 'error');
                document.getElementById('transactionAmount').focus();
                return;
            }
            
            if (!personId) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø´Ø®Øµ', 'error');
                document.getElementById('transactionPerson').focus();
                return;
            }
            
            if (type === 'transfer' && !transferToId) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø±Ø§Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„ÙŠÙ‡', 'error');
                document.getElementById('transferToPerson').focus();
                return;
            }
            
            if (type === 'transfer' && personId === transferToId) {
                showNotification('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù†ÙØ³ Ø§Ù„Ø´Ø®Øµ', 'error');
                return;
            }
            
            const newTransaction = {
                id: Date.now().toString(),
                type: type,
                amount: amount,
                currency: currency,
                description: description,
                date: new Date().toISOString().split('T')[0],
                createdAt: new Date().toISOString()
            };
            
            if (type === 'income' || type === 'expense') {
                newTransaction.personId = personId;
            } else if (type === 'transfer') {
                newTransaction.fromPersonId = personId;
                newTransaction.toPersonId = transferToId;
            }
            
            appData.transactions.push(newTransaction);
            
            if (saveData()) {
                updateUI();
                closeModal('addTransactionModal');
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }
        
        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `smart-money-manager-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }
        
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ù†ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                        if (importedData.people && importedData.transactions) {
                            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©.')) {
                                appData = importedData;
                                saveData();
                                updateUI();
                                applySettings();
                                showNotification('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
                            }
                        } else {
                            showNotification('Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­', 'error');
                        }
                    } catch (error) {
                        showNotification('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù', 'error');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function resetData() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                if (confirm('âŒ ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª.')) {
                    localStorage.removeItem(STORAGE_KEY);
                    appData = {
                        people: [],
                        transactions: [],
                        settings: {
                            darkMode: false,
                            defaultCurrency: 'LYD'
                        },
                        version: '2.0',
                        lastUpdate: new Date().toISOString()
                    };
                    saveData();
                    updateUI();
                    showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
                }
            }
        }
        
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        function searchTransactions() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const transactionsList = document.getElementById('transactionsList');
            
            if (!query.trim()) {
                updateTransactionsList();
                return;
            }
            
            const filteredTransactions = appData.transactions.filter(transaction => {
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
                let personName = '';
                if (transaction.type === 'income' || transaction.type === 'expense') {
                    personName = getPersonName(transaction.personId);
                } else if (transaction.type === 'transfer') {
                    personName = `${getPersonName(transaction.fromPersonId)} â†’ ${getPersonName(transaction.toPersonId)}`;
                }
                
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆØµÙ
                const description = transaction.description || '';
                
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¨Ù„Øº
                const amount = transaction.amount.toString();
                
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®
                const date = transaction.date;
                
                return personName.toLowerCase().includes(query) ||
                       description.toLowerCase().includes(query) ||
                       amount.includes(query) ||
                       date.includes(query);
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            if (filteredTransactions.length === 0) {
                transactionsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h4>
                        <p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù…Ù„ÙŠØ§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«</p>
                    </div>
                `;
            } else {
                let html = '<div class="transactions-list">';
                
                filteredTransactions.slice().reverse().forEach(transaction => {
                    let personName = '';
                    let icon = 'fas fa-exchange-alt';
                    let color = 'var(--primary)';
                    let amountPrefix = '';
                    
                    if (transaction.type === 'income') {
                        personName = getPersonName(transaction.personId);
                        icon = 'fas fa-arrow-down';
                        color = 'var(--success)';
                        amountPrefix = '+';
                    } else if (transaction.type === 'expense') {
                        personName = getPersonName(transaction.personId);
                        icon = 'fas fa-arrow-up';
                        color = 'var(--danger)';
                        amountPrefix = '-';
                    } else if (transaction.type === 'transfer') {
                        personName = `${getPersonName(transaction.fromPersonId)} â†’ ${getPersonName(transaction.toPersonId)}`;
                        icon = 'fas fa-money-bill-transfer';
                        color = 'var(--info)';
                        amountPrefix = 'â†”';
                    }
                    
                    html += `
                        <div class="transaction-item">
                            <div class="transaction-icon" style="background: ${color}">
                                <i class="${icon}"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-title">${personName}</div>
                                <div class="transaction-info">
                                    ${transaction.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'} â€¢ ${formatDate(transaction.date)}
                                </div>
                            </div>
                            <div class="transaction-amount" style="color: ${color}">
                                ${amountPrefix}${formatCurrency(transaction.amount, transaction.currency)}
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                transactionsList.innerHTML = html;
            }
        }
        
        // ØªØµÙÙŠØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        function filterTransactions(filter) {
            const transactionsList = document.getElementById('transactionsList');
            
            let filteredTransactions = appData.transactions;
            
            if (filter !== 'all') {
                filteredTransactions = appData.transactions.filter(t => t.type === filter);
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            if (filteredTransactions.length === 0) {
                transactionsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-filter"></i>
                        <h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª</h4>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ù† Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯</p>
                    </div>
                `;
            } else {
                let html = '<div class="transactions-list">';
                
                filteredTransactions.slice().reverse().slice(0, 20).forEach(transaction => {
                    let personName = '';
                    let icon = 'fas fa-exchange-alt';
                    let color = 'var(--primary)';
                    let amountPrefix = '';
                    
                    if (transaction.type === 'income') {
                        personName = getPersonName(transaction.personId);
                        icon = 'fas fa-arrow-down';
                        color = 'var(--success)';
                        amountPrefix = '+';
                    } else if (transaction.type === 'expense') {
                        personName = getPersonName(transaction.personId);
                        icon = 'fas fa-arrow-up';
                        color = 'var(--danger)';
                        amountPrefix = '-';
                    } else if (transaction.type === 'transfer') {
                        personName = `${getPersonName(transaction.fromPersonId)} â†’ ${getPersonName(transaction.toPersonId)}`;
                        icon = 'fas fa-money-bill-transfer';
                        color = 'var(--info)';
                        amountPrefix = 'â†”';
                    }
                    
                    html += `
                        <div class="transaction-item">
                            <div class="transaction-icon" style="background: ${color}">
                                <i class="${icon}"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-title">${personName}</div>
                                <div class="transaction-info">
                                    ${transaction.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'} â€¢ ${formatDate(transaction.date)}
                                </div>
                            </div>
                            <div class="transaction-amount" style="color: ${color}">
                                ${amountPrefix}${formatCurrency(transaction.amount, transaction.currency)}
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                transactionsList.innerHTML = html;
            }
        }
        
        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
        function generateReport() {
            // Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„
            showNotification('Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ±...', 'info');
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function showSettingsActions() {
            // Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„
            showNotification('ÙØªØ­ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©', 'info');
        }
        
        // ====================
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        // ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            loadData();
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            initializeEvents();
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø¨Ù…ÙØªØ§Ø­ ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal.active').forEach(modal => {
                        modal.classList.remove('active');
                    });
                }
            });
            
            console.log('ğŸš€ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…');
        });
    </script>
</body>
</html>
